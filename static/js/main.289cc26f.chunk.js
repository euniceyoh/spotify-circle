(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{72:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var c=n(6),i=n(5),r=n.n(i),o=n(32),s=n.n(o),a=(n(72),n(8)),l=n(33),u=n.n(l),d=n(25);d.a.initializeApp({apiKey:"AIzaSyCpghKtDDicPFsyO1340ZlTqvTv-CLkCR4",authDomain:"spotify-circle-76dff.firebaseapp.com",databaseURL:"https://spotify-circle-76dff-default-rtdb.firebaseio.com",projectId:"spotify-circle-76dff",storageBucket:"spotify-circle-76dff.appspot.com",messagingSenderId:"641874987404",appId:"1:641874987404:web:50997de6851e1f7667aea9",measurementId:"G-91M1Y3GKZC"});var f=d.a.firestore(),b=f;var j=n(12);var h=function(e){var t=Object(i.useState)([{name:"Eunice",similarityScore:12},{name:"Lawrence",similarityScore:73},{name:"Nick",similarityScore:31},{name:"Carter",similarityScore:100},{name:"Joe Shmoe",similarityScore:42},{name:"Bobby Shmurda",similarityScore:35}]),n=Object(a.a)(t,2),r=n[0],o=(n[1],Object(i.useRef)());return Object(i.useEffect)((function(){var e=j.f(o.current).append("svg").attr("height","100%").attr("width","100%").attr("transform","translate(0,0)"),t=j.b().force("x",j.c(400).strength(.05)).force("y",j.d(200).strength(.05)).force("collide",j.a((function(e){return n(e.similarityScore)}))),n=j.e().domain([1,100]).range([10,100]),c=e.selectAll(".bubble").data(r).enter().append("g"),i=c.append("circle").attr("r",(function(e){return n(e.similarityScore)})).attr("fill","lightblue").on("click",(function(e,t){console.log(t)})),s=c.append("text").attr("text-anchor","middle").style("fill","white").style("font-size",15).text((function(e){return e.name}));t.nodes(r).on("tick",(function(){i.attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})),s.attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}))}))}),[r]),Object(c.jsx)("div",{children:Object(c.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 800 800",ref:o})})};function O(){var e=Object(i.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],o=new u.a,s=function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,c=window.location.hash.substring(1);for(e=n.exec(c);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(c);return t}().access_token;return s&&o.setAccessToken(s),o.getMe().then((function(e){r(e.id)})),Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)("header",{className:"App-header",children:[Object(c.jsx)("h1",{children:"Welcome to Spotify Circle"}),Object(c.jsx)("div",{id:"login",children:Object(c.jsx)("form",{action:"http://localhost:8888/login",children:Object(c.jsx)("input",{type:"submit",value:"Login to Spotify"})})}),Object(c.jsxs)("div",{children:["Your ID: ",n]}),Object(c.jsx)(m,{userId:n}),Object(c.jsx)(h,{userId:n})]})})}function m(e){var t=e.userId,n=Object(i.useState)(""),r=Object(a.a)(n,2),o=r[0],s=r[1],l=Object(i.useState)([]),u=Object(a.a)(l,2),d=(u[0],u[1]),j=Object(i.useState)(0),h=Object(a.a)(j,2),O=h[0],m=h[1],g=Object(i.useState)(0),p=Object(a.a)(g,2),S=(p[0],p[1],Object(i.useState)(0)),x=Object(a.a)(S,2),y=(x[0],x[1],Object(i.useState)(0)),v=Object(a.a)(y,2),w=(v[0],v[1],Object(i.useState)([])),I=Object(a.a)(w,2),L=I[0],k=I[1],C=Object(i.useState)([]),E=Object(a.a)(C,2),F=E[0],A=E[1],B=Object(i.useState)([]),D=Object(a.a)(B,2),T=D[0],R=D[1],z=Object(i.useState)([]),J=Object(a.a)(z,2),K=J[0],M=J[1],N=Object(i.useState)([]),P=Object(a.a)(N,2),U=P[0],G=P[1],Y=Object(i.useState)([]),Z=Object(a.a)(Y,2),q=Z[0],W=Z[1],_=Object(i.useState)([]),H=Object(a.a)(_,2),Q=H[0],V=H[1],X=Object(i.useState)(!1),$=Object(a.a)(X,2),ee=($[0],$[1],function(){var e,n,c,i=(e=q,T.filter((function(t){return-1!==e.indexOf(t)})).length),r=(n=U,F.filter((function(e){return-1!==n.indexOf(e)})).length),s=(c=K,L.filter((function(e){return-1!==c.indexOf(e)})).length);R(i),A(r),k(s);var a=i+r+s;m(a),function(e,t){var n=f.collection("users").doc(t),c=f.collection("users").doc(e);n.get().then((function(n){n.exists?c.collection("friendsList").doc(t).get().then((function(n){n.exists?console.log("Friend "+t+"already exists in user friendList"):(f.collection("users").doc(e).collection("friendsList").doc(t).set({similarityScore:null}).then((function(){console.log("Friend's document successfully written to user's friends list!")})).catch((function(e){console.error("Error writing document: ",e)})),f.collection("users").doc(t).collection("friendsList").doc(e).set({similarityScore:null}).then((function(){console.log("User's document successfully written to friend's friends list!")})).catch((function(e){console.error("Error writing document: ",e)})))})).catch((function(e){console.log("Error getting document:",e)})):console.log("Friend does not exist in database!")})).catch((function(e){console.log("Error getting document:",e)}))}(t,o),function(e,t,n){f.collection("users").doc(e).collection("friendsList").doc(t).set({similarityScore:n}).then((function(){console.log("Similarity score successfully written into user's friend list!")})).catch((function(e){console.error("Error writing document: ",e)})),f.collection("users").doc(t).collection("friendsList").doc(e).set({similarityScore:n}).then((function(){console.log("Similarity score successfully written to friend's friends list!")})).catch((function(e){console.error("Error writing document: ",e)}))}(t,o,a)});return Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:function(){b.collection("users").doc(t).get().then((function(e){if(e.exists){var t=e.data();d(t),k(t.genres),A(t.artists),R(t.trackId)}})).catch((function(e){d(null)})),b.collection("users").doc(o).get().then((function(e){if(e.exists){var t=e.data();d(t),M(t.genres),G(t.artists),W(t.trackId)}})).catch((function(e){d(null)})),ee()},children:[Object(c.jsx)("label",{children:Object(c.jsx)("input",{type:"text",value:o,onChange:function(e){s(e.target.value)}})}),Object(c.jsx)("input",{type:"submit",value:"Submit"})]}),Object(c.jsxs)("div",{children:["Similarity Score: ",O]}),Object(c.jsxs)("div",{children:["Friend List: ",Q]}),Object(c.jsx)("button",{onClick:function(){b.collection("users").doc(t).collection("friendsList").get().then((function(e){var t=[];e.forEach((function(e){t.push([e.id,e.data().similarityScore])})),V(t)})).catch((function(e){V(null)}))},children:"Show Friend"})]})}var g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),i(e),r(e),o(e)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(O,{})}),document.getElementById("root")),g()}},[[77,1,2]]]);
//# sourceMappingURL=main.289cc26f.chunk.js.map